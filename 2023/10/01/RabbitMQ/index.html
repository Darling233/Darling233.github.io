<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>RabbitMQ | Darling的小屋</title><meta name="author" content="Darling"><meta name="copyright" content="Darling"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、MQ什么是MQMQ(Message Quene):消息队列，通过典型的生产者和消费者模型，生产者不断向消息队列中生产消息，消费者不断从队列装获取消息，并且生产和消费都是异步的，只关心消息的发送和接受，可以实现系统间解耦。通过利用高效可靠的消息传递机制进行平台无关的数据交流，实现分布式系统的集成 ![[MQ.png]] 不同MQ特点 RabbitMQ比Kafka更可靠，与Spring框架兼容性非">
<meta property="og:type" content="article">
<meta property="og:title" content="RabbitMQ">
<meta property="og:url" content="https://darling233.github.io/2023/10/01/RabbitMQ/index.html">
<meta property="og:site_name" content="Darling的小屋">
<meta property="og:description" content="一、MQ什么是MQMQ(Message Quene):消息队列，通过典型的生产者和消费者模型，生产者不断向消息队列中生产消息，消费者不断从队列装获取消息，并且生产和消费都是异步的，只关心消息的发送和接受，可以实现系统间解耦。通过利用高效可靠的消息传递机制进行平台无关的数据交流，实现分布式系统的集成 ![[MQ.png]] 不同MQ特点 RabbitMQ比Kafka更可靠，与Spring框架兼容性非">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-10-01T14:19:43.000Z">
<meta property="article:modified_time" content="2023-10-01T14:20:05.314Z">
<meta property="article:author" content="Darling">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://darling233.github.io/2023/10/01/RabbitMQ/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'RabbitMQ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-01 22:20:05'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Darling的小屋" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Darling的小屋"><span class="site-name">Darling的小屋</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">RabbitMQ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-01T14:19:43.000Z" title="发表于 2023-10-01 22:19:43">2023-10-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-10-01T14:20:05.314Z" title="更新于 2023-10-01 22:20:05">2023-10-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="RabbitMQ"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="一、MQ"><a href="#一、MQ" class="headerlink" title="一、MQ"></a>一、MQ</h2><h3 id="什么是MQ"><a href="#什么是MQ" class="headerlink" title="什么是MQ"></a>什么是MQ</h3><p>MQ(Message Quene):消息队列，通过典型的生产者和消费者模型，<strong>生产者不断向消息队列中生产消息，消费者不断从队列装获取消息，并且生产和消费都是异步的</strong>，只关心消息的发送和接受，可以实现系统间解耦。通过利用高效可靠的消息传递机制进行平台无关的数据交流，实现分布式系统的集成</p>
<p>![[MQ.png]]</p>
<h3 id="不同MQ特点"><a href="#不同MQ特点" class="headerlink" title="不同MQ特点"></a>不同MQ特点</h3><blockquote>
<p>RabbitMQ比Kafka更可靠，与Spring框架兼容性非常好，Kafka更适合IO高吞吐、对性能要求高场景，一般应用在对实时性、可靠性要求稍低的场景，比如ELK日志收集</p>
</blockquote>
<p>![[Pasted image 20230927202908.png]]</p>
<h2 id="二、RabbitMQ"><a href="#二、RabbitMQ" class="headerlink" title="二、RabbitMQ"></a>二、RabbitMQ</h2><blockquote>
<p>基于[AMQP](<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/AMQP/8354716">AMQP_百度百科 (baidu.com)</a>)协议，erlang语言开发，是部署最广泛的开源消息中间件<br>[官网](<a target="_blank" rel="noopener" href="https://www.rabbitmq.com/">RabbitMQ: easy to use, flexible messaging and streaming — RabbitMQ</a>)</p>
</blockquote>
<p>![[Pasted image 20230928014235.png]]</p>
<h3 id="部署RabbitMQ"><a href="#部署RabbitMQ" class="headerlink" title="部署RabbitMQ"></a>部署RabbitMQ</h3><h4 id="Win安装RabbitMQ"><a href="#Win安装RabbitMQ" class="headerlink" title="Win安装RabbitMQ"></a>Win安装RabbitMQ</h4><ol>
<li><p>安装RabbitMQ<br>[下载window安装包](<a target="_blank" rel="noopener" href="https://www.rabbitmq.com/download.html">Downloading and Installing RabbitMQ — RabbitMQ</a>)</p>
</li>
<li><p>安装Erlang<br>[下载Erlang依赖包](<a target="_blank" rel="noopener" href="https://github.com/erlang/otp/releases/tag/OTP-26.1">Release OTP 26.1 · erlang&#x2F;otp (github.com)</a>)<br><a href="%5Bwin10%E5%AE%89%E8%A3%85ERLANG_awzbin-CSDN%E5%8D%9A%E5%AE%A2%5D(https://blog.csdn.net/awzbin/article/details/103109420)">配置环境变量</a></p>
</li>
<li><p>遇到的问题：<br>[RabbitMQ出现Plugin configuration unchanged.问题](<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b2a08e2fafa8">RabbitMQ出现Plugin configuration unchanged.问题 - 简书 (jianshu.com)</a>)</p>
</li>
</ol>
<h4 id="Linux服务器部署RabbitMQ"><a href="#Linux服务器部署RabbitMQ" class="headerlink" title="Linux服务器部署RabbitMQ"></a>Linux服务器部署RabbitMQ</h4><p><a href="%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E5%99%A8">[Server]</a><br><a href="%5BRabbitMQ%E8%B6%85%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B%EF%BC%88Linux%EF%BC%89_rabbitmq%E5%AE%89%E8%A3%85-CSDN%E5%8D%9A%E5%AE%A2%5D(https://blog.csdn.net/qq_45173404/article/details/116429302)">RabbitMQ超详细安装教程（Linux）</a></p>
<ul>
<li>RabbitMQ有一个默认的账号密码<code>guest</code>，但该情况仅限于本机localhost进行访问，所以需要添加一个远程登录的用户</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加用户</span></span><br><span class="line">rabbitmqctl add_user 用户名 密码</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置用户角色,分配操作权限</span></span><br><span class="line">rabbitmqctl set_user_tags 用户名 角色</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为用户添加资源权限(授予访问虚拟机根节点的所有权限)</span></span><br><span class="line">rabbitmqctl set_permissions -p / 用户名 <span class="string">&quot;.*&quot;</span> <span class="string">&quot;.*&quot;</span> <span class="string">&quot;.*&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="OverView"><a href="#OverView" class="headerlink" title="OverView"></a>OverView</h4><p>![[Pasted image 20230928011952.png]]</p>
<h4 id="RabbitMQ命令行"><a href="#RabbitMQ命令行" class="headerlink" title="RabbitMQ命令行"></a>RabbitMQ命令行</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># net start RabbitMQ  启动</span></span><br><span class="line"><span class="comment"># net stop RabbitMQ  停止</span></span><br><span class="line"><span class="comment"># rabbitmqctl status  查看状态</span></span><br></pre></td></tr></table></figure>

<h3 id="配置RabbitMQ"><a href="#配置RabbitMQ" class="headerlink" title="配置RabbitMQ"></a>配置RabbitMQ</h3><h4 id="添加虚拟机"><a href="#添加虚拟机" class="headerlink" title="添加虚拟机"></a>添加虚拟机</h4><blockquote>
<p>为不同用户配置各自虚拟机</p>
</blockquote>
<p>![[Pasted image 20230928130402.png]]</p>
<h4 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h4><blockquote>
<p>权限设置，此处设置为Admin</p>
</blockquote>
<p>![[Pasted image 20230928130446.png]]</p>
<h4 id="为用户配置访问权限"><a href="#为用户配置访问权限" class="headerlink" title="为用户配置访问权限"></a>为用户配置访问权限</h4><blockquote>
<p>可设置能访问的虚拟主机，以及可读、可写等权限。此处默认</p>
</blockquote>
<p>![[Pasted image 20230928130810.png]]</p>
<h2 id="三、RabbitMQ七种模型"><a href="#三、RabbitMQ七种模型" class="headerlink" title="三、RabbitMQ七种模型"></a>三、RabbitMQ七种模型</h2><blockquote>
<p>创建连接工厂对象</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建连接mq服务器的连接工厂对象  </span></span><br><span class="line"><span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();  </span><br><span class="line"><span class="comment">//设置连接rabbitmq主机  </span></span><br><span class="line">connectionFactory.setHost(<span class="string">&quot;47.107.94.211&quot;</span>);  </span><br><span class="line"><span class="comment">//设置端口号  </span></span><br><span class="line">connectionFactory.setPort(<span class="number">5672</span>);  </span><br><span class="line"><span class="comment">//设置连接的虚拟主机  </span></span><br><span class="line">connectionFactory.setVirtualHost(<span class="string">&quot;/ems&quot;</span>);  </span><br><span class="line"><span class="comment">//设置用户和密码  </span></span><br><span class="line">connectionFactory.setUsername(<span class="string">&quot;user&quot;</span>);  </span><br><span class="line">connectionFactory.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取连接对象  </span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();  </span><br><span class="line"><span class="comment">//获取连接中通道  </span></span><br><span class="line"><span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();  </span><br><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * 通道绑定对应的消息队列  </span></span><br><span class="line"><span class="comment"> * parameter[0]queue         队列名称，若没有自动创建  </span></span><br><span class="line"><span class="comment"> * parameter[1]:durable      是否持久化  </span></span><br><span class="line"><span class="comment"> * parameter[2]:exclusive    是否独占队列，是否可以被其他连接所用  </span></span><br><span class="line"><span class="comment"> * parameter[3]:autoDelete   消费完成后是否自动删除队列  </span></span><br><span class="line"><span class="comment"> * parameter[4]:arguments    额外参数  </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line">channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>将创建连接对象、关闭连接等操作抽封装成工具类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ConnectionFactory connectionFactory;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//重量级资源，提供一个单例即可  </span></span><br><span class="line"><span class="keyword">static</span>&#123;  </span><br><span class="line">    connectionFactory = <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();  </span><br><span class="line">    <span class="comment">//创建连接mq服务器的连接工厂对象  </span></span><br><span class="line">    <span class="type">ConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();  </span><br><span class="line">    <span class="comment">//设置连接rabbitmq主机  </span></span><br><span class="line">    connectionFactory.setHost(<span class="string">&quot;47.107.94.211&quot;</span>);  </span><br><span class="line">    <span class="comment">//设置端口号  </span></span><br><span class="line">    connectionFactory.setPort(<span class="number">5672</span>);  </span><br><span class="line">    <span class="comment">//设置连接的虚拟主机  </span></span><br><span class="line">    connectionFactory.setVirtualHost(<span class="string">&quot;/ems&quot;</span>);  </span><br><span class="line">    <span class="comment">//设置用户和密码  </span></span><br><span class="line">    connectionFactory.setUsername(<span class="string">&quot;user&quot;</span>);  </span><br><span class="line">    connectionFactory.setPassword(<span class="string">&quot;123456&quot;</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//创建连接对象方法  </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;  </span><br><span class="line">    <span class="keyword">try</span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> connectionFactory.newConnection();  </span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e)&#123;  </span><br><span class="line">        e.printStackTrace();  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//关闭通道和关闭连接工具方法  </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">closeConnectionAndChanel</span><span class="params">(Channel channel, Connection conn)</span>&#123;  </span><br><span class="line">    <span class="keyword">try</span>&#123;  </span><br><span class="line">        <span class="keyword">if</span>(channel!=<span class="literal">null</span>)  </span><br><span class="line">            channel.close();  </span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="literal">null</span>)  </span><br><span class="line">            conn.close();  </span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e)&#123;  </span><br><span class="line">        e.printStackTrace();  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1、HelloWorld"><a href="#1、HelloWorld" class="headerlink" title="1、HelloWorld"></a>1、HelloWorld</h3><blockquote>
<p>直连队列</p>
</blockquote>
<p>![[Pasted image 20230929172031.png]]</p>
<ul>
<li>生产者向队列发送消息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取连接对象  </span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> connectionFactory.newConnection();  </span><br><span class="line"><span class="comment">//获取连接中通道  </span></span><br><span class="line"><span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();  </span><br><span class="line"><span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * 通道绑定对应的消息队列  </span></span><br><span class="line"><span class="comment"> * parameter[0]queue         队列名称，若没有自动创建  </span></span><br><span class="line"><span class="comment"> * parameter[1]:durable      是否持久化  </span></span><br><span class="line"><span class="comment"> * parameter[2]:exclusive    是否独占队列，是否可以被其他连接所用  </span></span><br><span class="line"><span class="comment"> * parameter[3]:autoDelete   消费完成后是否自动删除队列  </span></span><br><span class="line"><span class="comment"> * parameter[4]:arguments    额外参数  </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line">channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//发布消息  </span></span><br><span class="line"><span class="comment">//参数1：交换机名称    参数2：队列名称    参数3：传递消息额外设置 MessageProperties.PERSISTENT_TEXT_PLAIN 持久化    参数4：消息具体内容  </span></span><br><span class="line">channel.basicPublish(<span class="string">&quot;&quot;</span>,<span class="string">&quot;hello&quot;</span>,<span class="literal">null</span>,<span class="string">&quot;hello rabbitmq&quot;</span>.getBytes());  </span><br><span class="line">  </span><br><span class="line">channel.close();  </span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure>

<ul>
<li>消费者获取信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//消费消息  </span></span><br><span class="line"><span class="comment">//参数1：消费消息的队列    参数2：开启消息的自动确认机制  </span></span><br><span class="line">channel.basicConsume(<span class="string">&quot;hello&quot;</span>,<span class="literal">true</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;  </span><br><span class="line">    <span class="comment">//处理消息时的回调  </span></span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment">     *     * <span class="doctag">@param</span> consumerTag  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> envelope  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> properties  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> body   消息队列中取出的消息  </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException  </span></span><br><span class="line"><span class="comment">     */</span>    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;new String(body) = &quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//如果不关闭，消费者回一直监听队列  </span></span><br><span class="line"><span class="comment">//channel.close();  </span></span><br><span class="line"><span class="comment">//connection.close();</span></span><br></pre></td></tr></table></figure>

<p>tips:消费者和生产者特性需一致，如消费者x队列持久化，生产者也需持久化，否则队列指定会不一致报错。</p>
<h3 id="2、Work-Queue"><a href="#2、Work-Queue" class="headerlink" title="2、Work Queue"></a>2、Work Queue</h3><blockquote>
<p>Work queues(Task queues):任务模型，当消息处理比较耗时，生产消息的速度可能远远大于消费消息的速度，导致消息堆积越来越多，无法及时处理。work模型：<strong>让多个消费者绑定一个队列，共同消费队列中消息，消息消费后就会消失</strong>，任务不会被重复执行。</p>
</blockquote>
<p>![[Pasted image 20230930010043.png]]</p>
<ul>
<li>生产者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">channel.queueDeclare(<span class="string">&quot;work&quot;</span>,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);  </span><br><span class="line"><span class="comment">//模拟源源不断生产消息  </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">19</span>;i++)&#123;  </span><br><span class="line">    channel.basicPublish(<span class="string">&quot;&quot;</span>,<span class="string">&quot;work&quot;</span>,<span class="literal">null</span>,(i + <span class="string">&quot; work quene&quot;</span>).getBytes());  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>消费者1</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">channel.queueDeclare(<span class="string">&quot;work&quot;</span>,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);  </span><br><span class="line">  </span><br><span class="line">channel.basicConsume(<span class="string">&quot;work&quot;</span>,<span class="literal">true</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">        <span class="comment">//处理消费消息回调  </span></span><br><span class="line">        System.out.println(<span class="string">&quot;消费者1：&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>消费者2</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">channel.queueDeclare(<span class="string">&quot;work&quot;</span>,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);  </span><br><span class="line">  </span><br><span class="line">channel.basicConsume(<span class="string">&quot;work&quot;</span>,<span class="literal">true</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">        <span class="comment">//处理消费消息回调  </span></span><br><span class="line">        System.out.println(<span class="string">&quot;消费者2：&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>循环分发：</strong></p>
<blockquote>
<p>默认采用循环算法，RabbitMQ按顺序将每个消息发送到下一个使用者，平均分配。但不同消费者处理速度相差较大时，此模型就不适用了</p>
</blockquote>
<p>![[Pasted image 20230930013442.png]]</p>
<p>![[Pasted image 20230930013532.png]]</p>
<p><strong>能者多劳：</strong></p>
<blockquote>
<p>关闭消息自动确认机制，防止确认后队列自动删除消息，而消费者宕机导致消息丢失。<br>开启消息手动确认，只有消息真正消费了才会删除消息。<br>每次只能消费一个消息，实现能者多劳</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//每次只消费一个消息  </span></span><br><span class="line">channel.basicQos(<span class="number">1</span>);  </span><br><span class="line">channel.queueDeclare(<span class="string">&quot;work&quot;</span>,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">null</span>);  </span><br><span class="line"><span class="comment">//关闭自动确认机制</span></span><br><span class="line">channel.basicConsume(<span class="string">&quot;work&quot;</span>,<span class="literal">false</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">        <span class="comment">//处理消费消息回调  </span></span><br><span class="line">        System.out.println(<span class="string">&quot;消费者1：&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));  </span><br><span class="line">        <span class="comment">//手动确认,  参数1：确认队列中哪个具体消息   参数2：false  是否开启多个消息同时确认  </span></span><br><span class="line">        channel.basicAck(envelope.getDeliveryTag(), <span class="literal">false</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>![[Pasted image 20230930020915.png]]</p>
<p>![[Pasted image 20230930020929.png]]</p>
<h3 id="3、Publish-Subscribe"><a href="#3、Publish-Subscribe" class="headerlink" title="3、Publish&#x2F;Subscribe"></a>3、Publish&#x2F;Subscribe</h3><blockquote>
<p>广播模型，消息由交换机分发给队列，一条消息可以被多个消费者消费</p>
</blockquote>
<p>![[Pasted image 20230930021657.png]]</p>
<ul>
<li>生产者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将通道声明指定交换机  </span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;p/s&quot;</span>,<span class="string">&quot;fanout&quot;</span>);  </span><br><span class="line"><span class="comment">//发送消息  </span></span><br><span class="line">channel.basicPublish(<span class="string">&quot;p/s&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="literal">null</span>,<span class="string">&quot;fanout type message&quot;</span>.getBytes());  </span><br><span class="line"><span class="comment">//释放资源  </span></span><br><span class="line">RabbitMQUtils.closeConnectionAndChanel(channel,connection);</span><br></pre></td></tr></table></figure>

<ul>
<li>消费者*n</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通道绑定交换机  </span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;p/s&quot;</span>,<span class="string">&quot;fanout&quot;</span>);  </span><br><span class="line"><span class="comment">//临时队列  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">queue</span> <span class="operator">=</span> channel.queueDeclare().getQueue();  </span><br><span class="line"><span class="comment">//绑定交换机和队列  </span></span><br><span class="line">channel.queueBind(queue,<span class="string">&quot;p/s&quot;</span>,<span class="string">&quot;&quot;</span>);  </span><br><span class="line"><span class="comment">//消费消息  </span></span><br><span class="line">channel.basicConsume(queue,<span class="literal">true</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;消费者1：&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h3 id="4、Routing"><a href="#4、Routing" class="headerlink" title="4、Routing"></a>4、Routing</h3><h4 id="Routing之订阅模型-Direct"><a href="#Routing之订阅模型-Direct" class="headerlink" title="Routing之订阅模型-Direct"></a>Routing之订阅模型-Direct</h4><blockquote>
<p>不同的消息可以被不同的队列消费，Exchange通过消息的Routing Key判断，队列的routingkey与消息routinkey一致才能发送</p>
</blockquote>
<p>![[Pasted image 20230930123505.png]]</p>
<ul>
<li>生产者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通道声明交换机    参数1：交换机名称    参数2：模式  路由模式  </span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;logs_direct&quot;</span>,<span class="string">&quot;direct&quot;</span>);  </span><br><span class="line"><span class="comment">//发送的消息  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">routingkey</span> <span class="operator">=</span> <span class="string">&quot;info&quot;</span>;  </span><br><span class="line">channel.basicPublish(<span class="string">&quot;logs_direct&quot;</span>,routingkey,<span class="literal">null</span>,(<span class="string">&quot;这是direct模型发布的基于route key: [&quot;</span> + routingkey + <span class="string">&quot;] 发送的消息&quot;</span>).getBytes());  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//关闭资源  </span></span><br><span class="line">RabbitMQUtils.closeConnectionAndChanel(channel,connection);</span><br></pre></td></tr></table></figure>

<ul>
<li>消费者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通道声明交换机以及类型  </span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;logs_direct&quot;</span>,<span class="string">&quot;direct&quot;</span>);  </span><br><span class="line"><span class="comment">//创建一个临时队列  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">queue</span> <span class="operator">=</span> channel.queueDeclare().getQueue();  </span><br><span class="line"><span class="comment">//基于route key绑定队列与交换机  </span></span><br><span class="line">channel.queueBind(queue,<span class="string">&quot;logs_direct&quot;</span>,<span class="string">&quot;error&quot;</span>);  </span><br><span class="line"><span class="comment">//获取消费的消息  </span></span><br><span class="line">channel.basicConsume(queue,<span class="literal">true</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;消费者1：&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Rouating之订阅模型-Topics"><a href="#Rouating之订阅模型-Topics" class="headerlink" title="Rouating之订阅模型-Topics"></a>Rouating之订阅模型-Topics</h4><blockquote>
<p>动态路由匹配规则，在绑定Routing Key可以绑定通配符</p>
</blockquote>
<p>![[Pasted image 20230930125330.png]]</p>
<ul>
<li>生产者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通道声明交换机    参数1：交换机名称    参数2：模式  路由模式  </span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;Topics&quot;</span>,<span class="string">&quot;topic&quot;</span>);  </span><br><span class="line"><span class="comment">//发送的消息  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">routingkey</span> <span class="operator">=</span> <span class="string">&quot;user&quot;</span>;  </span><br><span class="line">channel.basicPublish(<span class="string">&quot;Topics&quot;</span>,routingkey,<span class="literal">null</span>,(<span class="string">&quot;这是topic模型发布的route key: [&quot;</span> + routingkey + <span class="string">&quot;] 发送的消息&quot;</span>).getBytes());  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//关闭资源  </span></span><br><span class="line">RabbitMQUtils.closeConnectionAndChanel(channel,connection);</span><br></pre></td></tr></table></figure>

<ul>
<li>消费者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通道声明交换机以及类型  </span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;Topics&quot;</span>,<span class="string">&quot;topic&quot;</span>);  </span><br><span class="line"><span class="comment">//创建一个临时队列  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">queue</span> <span class="operator">=</span> channel.queueDeclare().getQueue();  </span><br><span class="line"><span class="comment">//基于route key绑定队列与交换机,使用通配符匹配  </span></span><br><span class="line">channel.queueBind(queue,<span class="string">&quot;Topics&quot;</span>,<span class="string">&quot;user.*&quot;</span>);  </span><br><span class="line"><span class="comment">//获取消费的消息  </span></span><br><span class="line">channel.basicConsume(queue,<span class="literal">true</span>,<span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel)&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;消费者1：&quot;</span> + <span class="keyword">new</span> <span class="title class_">String</span>(body));  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="四、SpringBoot整合RabbitMQ"><a href="#四、SpringBoot整合RabbitMQ" class="headerlink" title="四、SpringBoot整合RabbitMQ"></a>四、SpringBoot整合RabbitMQ</h2><blockquote>
<p>导入依赖</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用RabbitTemplate类快速构建</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注入rabbitTemplate  </span></span><br><span class="line"><span class="meta">@Resource</span>  </span><br><span class="line"><span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br></pre></td></tr></table></figure>

<ul>
<li>生产者</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直连模型  </span></span><br><span class="line"><span class="meta">@Test</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;  </span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;helloworld&quot;</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//能者多劳  </span></span><br><span class="line"><span class="meta">@Test</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span>&#123;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++)&#123;  </span><br><span class="line">        rabbitTemplate.convertAndSend(<span class="string">&quot;work&quot;</span>,<span class="string">&quot;yourworld &quot;</span> + i);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);  </span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;  </span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//广播模型  </span></span><br><span class="line"><span class="meta">@Test</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Fanout</span><span class="params">()</span>&#123;  </span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;logs&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;Fanout模型发送的消息&quot;</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//路由匹配  </span></span><br><span class="line"><span class="meta">@Test</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Route</span><span class="params">()</span>&#123;  </span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;directs&quot;</span>,<span class="string">&quot;error&quot;</span>,<span class="string">&quot;Route模型发送的消息&quot;</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//动态路由  </span></span><br><span class="line"><span class="meta">@Test</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">topic</span><span class="params">()</span>&#123;  </span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">&quot;topics&quot;</span>,<span class="string">&quot;com.user&quot;</span>,<span class="string">&quot;topics模型发送的消息&quot;</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>消费者</li>
</ul>
<h3 id="1、HelloWorld-1"><a href="#1、HelloWorld-1" class="headerlink" title="1、HelloWorld"></a>1、HelloWorld</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>          <span class="comment">//默认持久化 非独占 不会自动删除队列  </span></span><br><span class="line"><span class="meta">@RabbitListener(queuesToDeclare = @Queue(value = &quot;hello&quot;,durable = &quot;true&quot;, autoDelete = &quot;true&quot;))</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloConsumer</span> &#123;  </span><br><span class="line">    <span class="meta">@RabbitHandler</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;message = &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、Work-Queue-1"><a href="#2、Work-Queue-1" class="headerlink" title="2、Work Queue"></a>2、Work Queue</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WorkConsumer</span> &#123;  </span><br><span class="line">    <span class="meta">@RabbitListener(queuesToDeclare = @Queue(&quot;work&quot;))</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive1</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;msg: &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RabbitListener(queuesToDeclare = @Queue(&quot;work&quot;))</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;msg2: &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、Publish-Subscribe-1"><a href="#3、Publish-Subscribe-1" class="headerlink" title="3、Publish&#x2F;Subscribe"></a>3、Publish&#x2F;Subscribe</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutCustomer</span> &#123;  </span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;  </span></span><br><span class="line"><span class="meta">            @QueueBinding(  </span></span><br><span class="line"><span class="meta">                    value = @Queue,  </span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;logs&quot;,type = &quot;fanout&quot;)  </span></span><br><span class="line"><span class="meta">            )  </span></span><br><span class="line"><span class="meta">    &#125;)</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive1</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;message1: &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;  </span></span><br><span class="line"><span class="meta">            @QueueBinding(  </span></span><br><span class="line"><span class="meta">                    value = @Queue,  </span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;logs&quot;,type = &quot;fanout&quot;)  </span></span><br><span class="line"><span class="meta">            )  </span></span><br><span class="line"><span class="meta">    &#125;)</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;message2: &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、Routing-1"><a href="#4、Routing-1" class="headerlink" title="4、Routing"></a>4、Routing</h3><h4 id="Direct"><a href="#Direct" class="headerlink" title="Direct"></a>Direct</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RouteConsumer</span> &#123;  </span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;  </span></span><br><span class="line"><span class="meta">            @QueueBinding(  </span></span><br><span class="line"><span class="meta">                    value = @Queue,  </span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;directs&quot;,type = &quot;direct&quot;),  </span></span><br><span class="line"><span class="meta">                    key = &#123;&quot;error&quot;,&quot;info&quot;,&quot;warning&quot;&#125;  </span></span><br><span class="line"><span class="meta">            )  </span></span><br><span class="line"><span class="meta">    &#125;)</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive1</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;message1: &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;  </span></span><br><span class="line"><span class="meta">            @QueueBinding(  </span></span><br><span class="line"><span class="meta">                    value = @Queue,  </span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;directs&quot;,type = &quot;direct&quot;),  </span></span><br><span class="line"><span class="meta">                    key = &#123;&quot;error&quot;&#125;  </span></span><br><span class="line"><span class="meta">            )  </span></span><br><span class="line"><span class="meta">    &#125;)</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;message2: &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Topics"><a href="#Topics" class="headerlink" title="Topics"></a>Topics</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopicConsumer</span> &#123;  </span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;  </span></span><br><span class="line"><span class="meta">            @QueueBinding(  </span></span><br><span class="line"><span class="meta">                    value = @Queue,  </span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(type = &quot;topic&quot;,name = &quot;topics&quot;),  </span></span><br><span class="line"><span class="meta">                    key = &#123;&quot;user.*&quot;&#125;  </span></span><br><span class="line"><span class="meta">            )  </span></span><br><span class="line"><span class="meta">    &#125;)</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive1</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;message1: &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;  </span></span><br><span class="line"><span class="meta">            @QueueBinding(  </span></span><br><span class="line"><span class="meta">                    value = @Queue,  </span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(type = &quot;topic&quot;,name = &quot;topics&quot;),  </span></span><br><span class="line"><span class="meta">                    key = &#123;&quot;user.*&quot;,&quot;*.user&quot;&#125;  </span></span><br><span class="line"><span class="meta">            )  </span></span><br><span class="line"><span class="meta">    &#125;)</span>  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String message)</span>&#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;message2: &quot;</span> + message);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://darling233.github.io">Darling</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://darling233.github.io/2023/10/01/RabbitMQ/">https://darling233.github.io/2023/10/01/RabbitMQ/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://darling233.github.io" target="_blank">Darling的小屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/10/01/RabbitMQ-1/" title="RabbitMQ"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">RabbitMQ</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/01/RibbitMQ/" title=""><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Darling</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81MQ"><span class="toc-number">1.</span> <span class="toc-text">一、MQ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFMQ"><span class="toc-number">1.1.</span> <span class="toc-text">什么是MQ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%90%8CMQ%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.</span> <span class="toc-text">不同MQ特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81RabbitMQ"><span class="toc-number">2.</span> <span class="toc-text">二、RabbitMQ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2RabbitMQ"><span class="toc-number">2.1.</span> <span class="toc-text">部署RabbitMQ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Win%E5%AE%89%E8%A3%85RabbitMQ"><span class="toc-number">2.1.1.</span> <span class="toc-text">Win安装RabbitMQ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2RabbitMQ"><span class="toc-number">2.1.2.</span> <span class="toc-text">Linux服务器部署RabbitMQ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OverView"><span class="toc-number">2.1.3.</span> <span class="toc-text">OverView</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="toc-number">2.1.4.</span> <span class="toc-text">RabbitMQ命令行</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AERabbitMQ"><span class="toc-number">2.2.</span> <span class="toc-text">配置RabbitMQ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-number">2.2.1.</span> <span class="toc-text">添加虚拟机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-number">2.2.2.</span> <span class="toc-text">添加用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="toc-number">2.2.3.</span> <span class="toc-text">为用户配置访问权限</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81RabbitMQ%E4%B8%83%E7%A7%8D%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">三、RabbitMQ七种模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81HelloWorld"><span class="toc-number">3.1.</span> <span class="toc-text">1、HelloWorld</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Work-Queue"><span class="toc-number">3.2.</span> <span class="toc-text">2、Work Queue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Publish-Subscribe"><span class="toc-number">3.3.</span> <span class="toc-text">3、Publish&#x2F;Subscribe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Routing"><span class="toc-number">3.4.</span> <span class="toc-text">4、Routing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Routing%E4%B9%8B%E8%AE%A2%E9%98%85%E6%A8%A1%E5%9E%8B-Direct"><span class="toc-number">3.4.1.</span> <span class="toc-text">Routing之订阅模型-Direct</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Rouating%E4%B9%8B%E8%AE%A2%E9%98%85%E6%A8%A1%E5%9E%8B-Topics"><span class="toc-number">3.4.2.</span> <span class="toc-text">Rouating之订阅模型-Topics</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81SpringBoot%E6%95%B4%E5%90%88RabbitMQ"><span class="toc-number">4.</span> <span class="toc-text">四、SpringBoot整合RabbitMQ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81HelloWorld-1"><span class="toc-number">4.1.</span> <span class="toc-text">1、HelloWorld</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Work-Queue-1"><span class="toc-number">4.2.</span> <span class="toc-text">2、Work Queue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Publish-Subscribe-1"><span class="toc-number">4.3.</span> <span class="toc-text">3、Publish&#x2F;Subscribe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81Routing-1"><span class="toc-number">4.4.</span> <span class="toc-text">4、Routing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Direct"><span class="toc-number">4.4.1.</span> <span class="toc-text">Direct</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Topics"><span class="toc-number">4.4.2.</span> <span class="toc-text">Topics</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/01/RabbitMQ-1/" title="RabbitMQ">RabbitMQ</a><time datetime="2023-10-01T14:24:17.000Z" title="发表于 2023-10-01 22:24:17">2023-10-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/01/RabbitMQ/" title="RabbitMQ">RabbitMQ</a><time datetime="2023-10-01T14:19:43.000Z" title="发表于 2023-10-01 22:19:43">2023-10-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/01/RibbitMQ/" title="无题">无题</a><time datetime="2023-10-01T14:16:25.994Z" title="发表于 2023-10-01 22:16:25">2023-10-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/19/%E9%9D%A2%E8%AF%95/" title="面试">面试</a><time datetime="2023-09-18T21:27:11.000Z" title="发表于 2023-09-19 05:27:11">2023-09-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/19/Redis-1/" title="Redis">Redis</a><time datetime="2023-09-18T21:23:24.000Z" title="发表于 2023-09-19 05:23:24">2023-09-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Darling</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>